% code_dark.sty - Code syntax highlighting theme (dark)
% Dark theme for code listings

\ProvidesPackage{themes/code_dark}

\RequirePackage{listings}
\RequirePackage{xcolor}

% ========================================
% Code Font Selection
% ========================================
% Try to load modern monospace fonts (Fira Code or Cascadia Mono)
% Falls back to default if not available
\IfFileExists{FiraCode.sty}{
    \RequirePackage[scale=0.85]{FiraCode}
    \newcommand{\codefont}{\FiraCode}
}{
    \IfFileExists{FiraMono.sty}{
        \RequirePackage[scale=0.85]{FiraMono}
        \newcommand{\codefont}{\ttfamily}
    }{
        % Fallback to default monospace
        \newcommand{\codefont}{\ttfamily}
    }
}

% ========================================
% Code Theme Colors (Dark Mode)
% ========================================
\definecolor{codeBackground}{RGB}{30, 31, 34}        % Background #1E1F22
\definecolor{codeKeyword}{RGB}{197, 134, 192}        % Magenta/pink for keywords (#include, class, const, etc)
\definecolor{codeString}{RGB}{150, 190, 120}         % Green #96BE78 for strings
\definecolor{codeComment}{RGB}{128, 128, 128}        % Gray #808080 for comments
\definecolor{codeNumber}{RGB}{97, 175, 225}          % Blue #61AFE1 for numbers
\definecolor{codeFunction}{RGB}{220, 220, 170}       % Yellow/gold for function names
\definecolor{codeType}{RGB}{255, 200, 110}           % Yellow #FFC86E for types (Vector2D, T, std, etc)
\definecolor{codeIdentifier}{RGB}{255, 200, 110}     % Blue #61AFE1 for identifiers/parameters (x_val, other, etc)
\definecolor{codeText}{RGB}{212, 212, 212}           % Light gray for normal text
\definecolor{codeFrame}{RGB}{60, 60, 60}             % Dark gray for frame

% ========================================
% General Listing Style
% ========================================
% No background color in listings - mdframed will provide it
\lstset{
    basicstyle=\codefont\footnotesize,
    commentstyle=\color{codeComment}\itshape,
    keywordstyle=\color{codeKeyword}\bfseries,
    stringstyle=\color{codeString},
    numberstyle=\codefont\footnotesize\color{codeComment},
    showstringspaces=false,
    breaklines=true,
    breakatwhitespace=true,
    frame=none,
    numbers=left,
    numbersep=10pt,
    tabsize=4,
    captionpos=t,
    abovecaptionskip=5pt,
    belowcaptionskip=5pt,
    xleftmargin=0pt,
    xrightmargin=0pt,
    aboveskip=0pt,
    belowskip=0pt
}

% ========================================
% Mdframed style for solid background (fixes rendering artifacts)
% ========================================
\mdfdefinestyle{codeboxdark}{
    backgroundcolor=codeBackground,
    linecolor=codeBackground,
    linewidth=0pt,
    innerleftmargin=8pt,
    innerrightmargin=8pt,
    innertopmargin=8pt,
    innerbottommargin=8pt,
    skipabove=5pt,
    skipbelow=15pt,
    fontcolor=codeText
}

% Automatically surround lstlisting with mdframed  
\surroundwithmdframed[style=codeboxdark]{lstlisting}

% ========================================
% C++ Syntax Highlighting (Dark)
% ========================================
\lstdefinestyle{cpp}{
    language=C++,
    morekeywords={
        override, final, nullptr, constexpr, noexcept,
        concept, requires, co_await, co_return, co_yield,
        auto, decltype, typename
    },
    keywordstyle=\color{codeKeyword}\bfseries,
    keywordstyle=[2]\color{codeType}\bfseries,
    keywords=[2]{
        string, vector, map, set, list, deque, queue,
        stack, priority_queue, pair, tuple, array,
        shared_ptr, unique_ptr, weak_ptr,
        int, double, float, char, bool, void, long, short,
        size_t, uint8_t, uint16_t, uint32_t, uint64_t,
        std, Vector2D, T
    },
    keywordstyle=[3]\color{codeFunction}\bfseries,
    keywords=[3]{
        printf, scanf, malloc, free, sizeof,
        cout, cin, endl, cerr, push_back, size,
        begin, end, insert, erase, find
    },
    identifierstyle=\color{codeIdentifier},
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]'
}

% ========================================
% Java Syntax Highlighting (Dark)
% ========================================
\lstdefinestyle{java}{
    language=Java,
    morekeywords={
        var, record, sealed, permits, yield,
        instanceof, synchronized
    },
    keywordstyle=\color{codeKeyword}\bfseries,
    keywordstyle=[2]\color{codeType}\bfseries,
    keywords=[2]{
        String, Integer, Double, Boolean, Long, Float,
        Character, Byte, Short, Object, Class,
        ArrayList, HashMap, HashSet, LinkedList,
        List, Map, Set, Queue, Stack, Collection,
        int, double, float, char, boolean, void, long, byte, short
    },
    keywordstyle=[3]\color{codeFunction}\bfseries,
    keywords=[3]{
        System, out, in, println, print, printf,
        Scanner, Math, Thread, Exception,
        add, remove, get, put, size, isEmpty, contains
    },
    identifierstyle=\color{codeIdentifier},
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]',
    sensitive=true
}

% ========================================
% Python Syntax Highlighting (Dark bonus)
% ========================================
\lstdefinestyle{python}{
    language=Python,
    morekeywords={
        as, with, yield, async, await, nonlocal,
        match, case
    },
    keywordstyle=\color{codeKeyword}\bfseries,
    keywordstyle=[2]\color{codeType}\bfseries,
    keywords=[2]{
        int, str, list, dict, set, tuple, bool,
        float, bytes, object, type, None, True, False
    },
    keywordstyle=[3]\color{codeFunction}\bfseries,
    keywords=[3]{
        print, len, range, enumerate, zip, map,
        filter, sorted, sum, min, max, abs,
        append, extend, remove, pop, keys, values, items
    },
    identifierstyle=\color{codeIdentifier},
    morecomment=[l]{\#},
    morestring=[b]",
    morestring=[b]',
    morestring=[s]{"""}{"""},
    morestring=[s]{'''}{'''}
}

\endinput

